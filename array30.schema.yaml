# array30.scheme.yaml
# vim: set sw=2 sts=2 et:
# encoding: utf-8

schema:
  schema_id: array30
  name: "è¡Œåˆ—30"
  version: "2.0"
  author:
    - ç™¼æ˜äºº å»–æ˜å¾·å…ˆç”Ÿ
    - Jiehong Ma <ma.jiehong@gmail.com>
    - Terry Tsang <archerindigo@gmail.com>
  description: |
    è¡Œåˆ—30è¼¸å…¥æ³•
    http://www.array.com.tw/
  dependencies:
    - array30_wsymbols
    - luna_quanpin

switches:
  - name: ascii_mode
    reset: 0
    states: [ ä¸­æ–‡, è¥¿æ–‡ ]
  - name: full_shape
    states: [ åŠè§’, å…¨è§’ ]
  - name: simplification
    states: [ æ¼¢å­—, æ±‰å­— ]
  - name: extended_charset
    reset: 1
    states: [ å¸¸ç”¨, å¢å»£ ]
  - name: ascii_punct
    states: [ ã€‚ï¼Œ, ï¼ï¼Œ ]
  - name: emoji_suggestion
    states: [ "ğŸˆšï¸", "ğŸˆ¶ï¸" ]

menu:
  page_size: 10

engine:
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - affix_segmentor@wsymbols
    - affix_segmentor@array30_query                 # "?"è¬ç”¨å­—å…ƒç”¨
    - affix_segmentor@luna_pinyin                   # æ‹¼éŸ³åæŸ¥è¡Œåˆ—ç”¨
    - affix_segmentor@array30_to_bopomofo  #è¡Œåˆ—åæŸ¥æ³¨éŸ³ç”¨
    - punct_segmentor
    - fallback_segmentor
  translators:
    - table_translator
    - table_translator@wsymbols
    - table_translator@array30_query                # "?"è¬ç”¨å­—å…ƒç”¨
    - script_translator@luna_pinyin                 # æ‹¼éŸ³åæŸ¥è¡Œåˆ—ç”¨
    - table_translator@array30_to_bopomofo  #è¡Œåˆ—åæŸ¥æ³¨éŸ³ç”¨
    - punct_translator
  filters:
    - simplifier
    - simplifier@emoji_suggestion
    - uniquifier
    - reverse_lookup_filter@reverse_lookup_array30      # åæŸ¥è¡Œåˆ—
    - reverse_lookup_filter@reverse_lookup_bopomofo      # åæŸ¥æ³¨éŸ³

speller:
  alphabet: "abcdefghjiklmnopqrstuvwxyz;,./?'ABCDEFGHIJKLMNOPQRSTUVWXYZ"
  delimiter: "\\"
  algebra:
    - xform/^(.*)!$/$1/                 # ç°¡ç¢¼
    - xform/^(.*)@$/$1/                 # ç‰¹åˆ¥ç¢¼ï¼ˆé ˆç½®æ–¼ç°¡ç¢¼ä¹‹å¾Œï¼‰

#ä¸»translator
translator:
  dictionary: array30
  enable_charset_filter: true
  enable_user_dict: false
  enable_completion: true   # é è¨­å•Ÿå‹•é€éµæç¤ºï¼Œç…§é¡§emojiè¼¸å…¥
  enable_sentence: false  #é è¨­å–æ¶ˆè‡ªå‹•é€ å¥
  preedit_format:
    __include: array30_format
  comment_format:
    __include: array30_format

#w+æ•¸å­—éµsegmentoråŠ translator
wsymbols:
  tag: wsymbols
  dictionary: array30_wsymbols
  enable_completion: false
  enable_sentence: false
  enable_user_dict: false
  preedit_format:
    - 'xform|^w1$|æ¨™é»ç¬¦è™Ÿ|'
    - 'xform|^w2$|æ‹¬è™Ÿç¬¦è™Ÿ|'
    - 'xform|^w3$|ä¸€èˆ¬ç¬¦è™Ÿ|'
    - 'xform|^w4$|æ•¸å­¸ç¬¦è™Ÿ|'
    - 'xform|^w5$|æ–¹å‘ç¬¦è™Ÿ|'
    - 'xform|^w6$|å–®ä½ç¬¦è™Ÿ|'
    - 'xform|^w7$|åœ–è¡¨ç¬¦è™Ÿ|'
    - 'xform|^w8$|é †åºç¬¦è™Ÿ|'
    - 'xform|^w9$|å¸Œè‡˜ç¬¦è™Ÿ|'
    - 'xform|^w0$|æ³¨éŸ³ç¬¦è™Ÿ|'


#è¬ç”¨å­—å…ƒç”¨segmentoråŠ translator
array30_query:
  tag: array30_query
  dictionary: array30_query
  enable_charset_filter: true
  enable_completion: true
  preedit_format:
    __include: array30_format
  comment_format:
    __include: array30_format

# æ‹¼éŸ³åæŸ¥è¡Œåˆ—ç”¨segmentoråŠ translator
luna_pinyin:
  tag: luna_pinyin
  dictionary: luna_pinyin
  prism: luna_quanpin
  prefix: "`"
  suffix: "\\"
  tips: ã€”æ‹¼éŸ³â†’è¡Œåˆ—ã€•
  preedit_format:
    - xform/([nl])v/$1Ã¼/
    - xform/([nl])ue/$1Ã¼e/
    - xform/([jqxy])v/$1u/
    
#è¡Œåˆ—åæŸ¥æ³¨éŸ³ç”¨segmentoråŠ translator
array30_to_bopomofo:
  tag: array30_to_bopomofo
  dictionary: array30
  prism: array30
  enable_completion: true
  prefix: "="
  suffix: "\\"
  tips: "ã€”è¡Œåˆ—â†’æ³¨éŸ³ã€•"
  preedit_format:
    __include: array30_format

#filter
emoji_suggestion:
  opencc_config: emoji.json
  option_name: emoji_suggestion
  tips: all

# å¾å…¶ä»–è¼¸å…¥æ–¹æ¡ˆåæŸ¥è¡Œåˆ—ç”¨filter
reverse_lookup_array30:
  tags: [ luna_pinyin, array30_query ]
  overwrite_comment: true
  dictionary: array30
  comment_format:
    __include: array30_format
    __append:
      - 'xform| | ][ |'
      - 'xform|^(.)|[ $1|'
      - 'xform|(.)$|$1 ]|' #å°‡æ¯å€‹å­—ç¢¼ä»¥[ ]åŒ…ä½

#å¾å…¶ä»–è¼¸å…¥æ–¹æ¡ˆåæŸ¥æ³¨éŸ³ç”¨filter
reverse_lookup_bopomofo:
  tags: [array30_to_bopomofo]
  overwrite_comment: true
  dictionary: terra_pinyin
  comment_format:
    __include: "bopomofo.schema.yaml:/reverse_lookup_bopomofo/comment_format?"
    __append:
      - 'xform| | ][ |'
      - 'xform|^(.)|[ $1|'
      - 'xform|(.)$|$1 ]|' #å°‡æ¯å€‹å­—ç¢¼ä»¥[ ]åŒ…ä½

punctuator:
  import_preset: default

key_binder:
  import_preset: default
  bindings:
    - { when: paging, accept: comma, send: comma }
    - { when: has_menu, accept: period, send: period }
    - { when: has_menu, accept: space, send: space }
    - { when: composing, accept: space, send: Escape }

recognizer:
  patterns:
    wsymbols: "^[w][0-9]$"
    array30_query: "^.*[?]+[a-z;,.\/]*\\\\?$"
    luna_pinyin: "`[a-z]*\\\\?$"
    array30_to_bopomofo: "=[a-z;\/.,]*\\\\?"

###############é›œé …################

array30_format:
    - 'xform|^A$|ğŸ™‚|'   # Smileys & Emotion
    - 'xform|^S$|ğŸ§‘|'   # People & Body
    - 'xform|^D$|ğŸ•|'   # Animals & Nature
    - 'xform|^F$|ğŸ´|'   # Food & Drink
    - 'xform|^G$|âœˆ|'   # Travel & Places
    - 'xform|^H$|âš½|'   # Activities
    - 'xform|^J$|ğŸ’¡|'   # Objects
    - 'xform|^K$|ğŸ”£|'   # Symbols
    - 'xform|^L$|ğŸ´|'   # Flags
    - 'xform|v|4v|'
    - 'xform|q|1â†‘|'
    - 'xform|w|2â†‘|'
    - 'xform|e|3â†‘|'
    - 'xform|r|4â†‘|'
    - 'xform|t|5â†‘|'
    - 'xform|y|6â†‘|'
    - 'xform|u|7â†‘|'
    - 'xform|i|8â†‘|'
    - 'xform|o|9â†‘|'
    - 'xform|p|0â†‘|'
    - 'xform|a|1â€|'
    - 'xform|s|2â€|'
    - 'xform|d|3â€|'
    - 'xform|f|4â€|'
    - 'xform|g|5â€|'
    - 'xform|h|6â€|'
    - 'xform|j|7â€|'
    - 'xform|k|8â€|'
    - 'xform|l|9â€|'
    - 'xform|;|0â€|'
    - 'xform|z|1â†“|'
    - 'xform|x|2â†“|'
    - 'xform|c|3â†“|'
    - 'xform|b|5â†“|'
    - 'xform|n|6â†“|'
    - 'xform|m|7â†“|'
    - 'xform|,|8â†“|'
    - 'xform|\.|9â†“|'
    - 'xform|/|0â†“|'
    - 'xform|~| |'      # æ¶ˆé™¤é€éµæç¤ºå‰ç¶´'~'